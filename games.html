<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Games - Messydesk-studios</title>
    <link href="/style.css" rel="stylesheet" type="text/css" media="all">
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  </head>

<body>
<div id="container"><!--Container -->
<div id="nav-placeholder">

</div>

<script>
$(function(){
  $("#nav-placeholder").load("navigation.html");
});
</script>
<div id="container2">
<div id="sidebar">
</div>
<div id="main">
<div id="window">
<div id="head">
Games
</div>
<script>
$(function(){
  $("#sidebar").load("navigation2.html");
});
</script>
<div id="uh">

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const container = document.getElementById("scratch-game-thumbs");
  if (!container) return;

  // --- IDs or URLs to exclude ---
  const excludeList = [
    "1073722324", // Scratch project ID
    "https://example.itch.io/game", // Itch.io URL
  ];

  // --- Overrides with optional custom positions ---
  const overrides = {
    "https://messydesk-studios.itch.io/taylor-swift-the-video-game": {
      thumb: "http://img.itch.zone/aW1nLzI0NDY3MTM3LnBuZw==/315x250%23c/7cyREl.png",
    },
    "https://messydesk-studios.itch.io/": {
      thumb: "https://messydesk-studios.itch.io/static/images/frog.png",
      position: 0 // <-- this will force it to the first card
    },
  };

  try {
    const response = await fetch("https://messydesk.neocities.org/more");
    if (!response.ok) throw new Error("Failed to fetch /more");
    const html = await response.text();
    const doc = new DOMParser().parseFromString(html, "text/html");
    const headers = Array.from(doc.querySelectorAll("h2"));

    // --- SCRATCH GAMES ---
    const gamesHeader = headers.find(h => h.textContent.trim() === "Games");
    let scratchLinks = [];
    if (gamesHeader) {
      let node = gamesHeader.nextElementSibling;
      while (node && node.tagName !== "H2") {
        scratchLinks.push(...Array.from(node.querySelectorAll('a[href*="scratch.mit.edu/projects/"]')));
        node = node.nextElementSibling;
      }
    }

    scratchLinks = scratchLinks
      .filter(link => {
        const idMatch = link.href.match(/projects\/(\d+)/);
        if (!idMatch) return true;
        return !excludeList.includes(idMatch[1]);
      })
      .reverse();

    // --- ITCH.IO GAMES ---
    let itchLinks = [];
    if (gamesHeader) {
      let node = gamesHeader.nextElementSibling;
      while (node && node.tagName !== "H2") {
        node.querySelectorAll('a[href*="itch.io"]').forEach(a => {
          if (!excludeList.includes(a.href)) {
            itchLinks.push({
              url: a.href,
              title: a.textContent.trim(),
              thumb: overrides[a.href]?.thumb || "",
              author: "Lucas Michael",
              position: overrides[a.href]?.position
            });
          }
        });
        node = node.nextElementSibling;
      }
    }

    scratchLinks = scratchLinks.map(link => {
      const id = link.href.match(/projects\/(\d+)/)[1];
      return {
        url: link.href,
        title: link.textContent.trim(),
        thumb: overrides[id]?.thumb || `https://uploads.scratch.mit.edu/projects/thumbnails/${id}.png`,
        author: "Lucas Michael",
        position: overrides[id]?.position
      };
    })

    // --- COMBINE ITCH.IO FIRST, THEN SCRATCH ---
    let allGames = [...itchLinks, ...scratchLinks];

    // --- INSERT CARDS WITH CUSTOM POSITIONS ---
    allGames.forEach(game => {
      let title = game.title;
      const maxLength = 25;
      if (title.length > maxLength) title = title.slice(0, maxLength - 3) + "...";

      const card = document.createElement("div");
      card.className = "game-card";
      card.innerHTML = `
        <a href="${game.url}" target="_blank">
          <img src="${game.thumb}" alt="${title}">
          <p>${title}</p>
        </a>
        <p class="author">${game.author}</p>
      `;

      // Insert at custom position if defined, otherwise append
      if (typeof game.position === "number" && game.position < container.children.length) {
        container.insertBefore(card, container.children[game.position]);
      } else {
        container.appendChild(card);
      }
    });

  } catch (e) {
    console.error("Failed to load games:", e);
  }
});
</script>










<div id="games">
<div id="scratch-game-thumbs"></div>
</div>
</div>






</div>

</div><!-- main -->
</div> <!-- conatiner2 --> 
</div> <!-- conatiner --> 
<style>
#main{
 width: 90%;
}
#uh{
  overflow: auto;
  height: 620px;
}
#one a, #three a, #four a, #five a, #six a{
 color: black;
 background: #e5e5e5;
 /*background: linear-gradient(180deg, rgb(240, 240, 240) 0%, rgb(206, 206, 206) 12%, rgba(206, 206, 206, 1) 100%);*/
 background: linear-gradient(180deg, rgb(260, 260, 260) 0%, rgb(226, 226, 226) 12%, rgba(226, 226, 226, 1) 100%);
 border-top: 1px solid black;
}
a{
 color: #003399; 
}
#two a{
 /*background: linear-gradient(180deg,rgba(110, 110, 110, 1) 0%, rgba(54, 53, 53, 1) 100%);*/
 background: linear-gradient(180deg, rgb(40, 40, 40) 0%, rgb(100, 100, 100) 12%, rgba(100, 100, 100, 1) 100%);
 color: white;
}




#games{
  display: flex;
  margin-left: 5%;
  margin-right: 5%;
  margin-top: 20px;
  margin-bottom: 20px;
}

#scratch-game-thumbs {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}



.game-card {
  width: 160px;
  padding: 10px;
  background: #f0ecec;
  border: 1px solid #1d1d1d;
  margin: 0px;
}

.game-card img {
  margin-left: auto;
  margin-right: auto;
  display: block;
  margin-bottom: 10px;
  width: 100%;
  height: 120px;
  object-fit: cover;
}

.game-card p{
  font-size: 14px; 
  padding: 0px; 
  margin-top: 3px;
  margin-bottom: 0;
  color: black;
  
  white-space: nowrap;       /* Keep it on one line */
  overflow: hidden;          /* Hide overflowing text */
  text-overflow: ellipsis;   /* Show "..." */
  max-width: 140px; 
}
.game-card a,
.game-card a:visited,
.game-card a:active {
  color: black;
  text-decoration: none;
  font-weight: bold;
}
.game-card a:hover{
 text-decoration: underline; 
 text-decoration-color: black;
}
.author{
    margin: 0;
    font-size: 12px;
}
</style>
</body>
</html>